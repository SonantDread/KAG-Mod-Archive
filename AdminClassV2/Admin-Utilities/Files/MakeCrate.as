// make a crate that when unpacked become blobName
// inventoryName for GUI

shared CBlob@ server_MakeCrate(string blobName, string inventoryName, int frameIndex, int team, Vec2f pos, bool init = true)
{
	CBlob@ crate = server_CreateBlobNoInit("crate");

	if (crate !is null)
	{
		if(blobName == "necromancer")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "blackpage")
		{
			crate.setPosition(pos);
			return crate;
		}
			if(blobName == "shorde")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "waterelemental")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fireelemental")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "earthelemental")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "airelemental")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "raven")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "ak47")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bergman")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bigiron")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "jeremy")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "jeremymk2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "leveraction")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "martyrifle")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "lewisgun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "m1")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "m95")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mp18")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mp40")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sasha")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "shitgun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sigfried")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "smalliron")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "stergun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "stergunmk2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "stg44")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "supershogun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "thundertube")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "trenchgun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "ultrashotgun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "shitcar")
		{
			crate.setPosition(pos);
			return crate;
		}		
		if(blobName == "herman")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "jeffery")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pantserwagen")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sergey")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "techshop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryjeffery")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorym95")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorymp18")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "garage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "gunshop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "gunzerkershop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "lws_missile")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "lws_aircraft")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "kiln")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "kwartier")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorybeer")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryframe")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryjeremy")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorypolymer")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorysteel")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factorystergun")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryadvancedbergman")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryadvanceddynamite")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "factoryadvancedframe")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "polymerfactory")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_steel")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sam")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sat")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sentry")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "lws")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_smallrocket")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zapper")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sammissile")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_sawrocket")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_sammissile")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_gatlingammo")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pantsershot")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "cal050")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_coal")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_tape")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_bolts")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "chickencannonshell")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "techmain")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_cementing")
		{
			crate.setPosition(pos);
			return crate;
		}
		/*if(blobName == "mat_polymer")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_elec")
		{
			crate.setPosition(pos);
			return crate;
		}*/
		if(blobName == "material_powder_crystal")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fireblob")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "babby")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "beer")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bobomax")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bobongo")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "boof")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "crak")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "domino")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fiks")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "foof")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fusk")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "gooby")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "love")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "paxilon")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "poot")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "propesko")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "radpill")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "rippio")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "schisk")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "stim")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "vodka")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_iron")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "craftshop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_battery")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "tmbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "minibossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "wbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "dbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "ddbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "rdbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fbossmessage")
		{
			crate.setPosition(pos);
			return crate;
		}		
		if(blobName == "pootgas")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fumes")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sosek")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sosekflame")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "birb")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "piglet")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bunny")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zbunny")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_org")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_bedrock")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "material_powder_crystal")
		{
			crate.setPosition(pos);
			return crate;
		}
		
	    if(blobName == "snoop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "tea")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "nukeexplossion")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "rocketlauncher")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "rpg")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "dynamite")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "tnt")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "fraggrenade")
		{
			crate.setPosition(pos);
			return crate;
		}if(blobName == "antitank")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_dynamite")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_tnt")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_fraggrenade")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "mat_antitank")
		{
			crate.setPosition(pos);
			return crate;
		}
		
		
		
		if(blobName == "jflzejfiojojfoiefjhgheoihfohflsdkhfhjkhjkgkjyfyfyjfkhjf")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "Bekkit")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "Vinyl")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sarsonist")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "spyro")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "whitepage")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "BossGreenTroll")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "minotaur")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "blackbuilding")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "necromancershop")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "rocket")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "Stop_search_file_you_are_ridiculous")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "cannonball")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "priest_orb")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "wizard_orb")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "spyro")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "reiughdfkjhgreuihgjkjjhgkjldfhgurvnjfdkdhglkdhufhgrklhgdkljrhgukhfkjhgjlkjklj")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "reiughdfkjhgreuihgjkjjhgkjldfhgurvnjfdkdhglkdhufhgrklhgdkljrhgukhfkjhg")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "dksjgheiruvhirbneuirg")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "BossGreenTroll")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "BossMinotaurKing")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "BossRabidDog")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "BossRedDragon")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "undeadbuilding")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "undeadbarracks")
		{
			crate.setPosition(pos);
			return crate;
		}
		/*if(blobName == "bomb")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "waterbomb")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "keg")
		{
			crate.setPosition(pos);
			return crate;
		}*/
		if(blobName == "bison")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "musicbox")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "meteor")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "smeteor")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "scrollundead")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "oct")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "sneakynickels")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "hayrock")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "shark")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "greg")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "abomination")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "catto")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "catto2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "digger")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "gasbag")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "gasbag2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "greg2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "horror")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pankou")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pankou")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pbanshee")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pbrute")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pcrawler")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pcrawler2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "pgreg")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "greg0")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "phellknight")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "skeleton")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "skeleton2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "wraith")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "wraith2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zbison2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zbison2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zchicken")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zombie")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zombie2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zombiearm")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zombieknight")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "zombieknight2")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "immolator")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "flamebag")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "OCT")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "bison")
		{
			crate.setPosition(pos);
			return crate;
		}
		if(blobName == "shark")
		{
			crate.setPosition(pos);
			return crate;
		}
		
		crate.server_setTeamNum(team);
		crate.setPosition(pos);
		crate.set_string("packed", blobName);
		crate.set_string("packed name", inventoryName);
		crate.set_u8("frame", frameIndex);
		if (init)
			crate.Init();
	}

	return crate;
}

shared CBlob@ server_MakeCrateOnParachute(string blobName, string inventoryName, int frameIndex, int team, Vec2f pos)
{
	CBlob@ crate = server_MakeCrate(blobName, inventoryName, frameIndex, team, pos, false);

	if (crate !is null)
	{
		crate.Tag("parachute");
		//if (blobName == "catapult" || blobName == "ballista") {
		//  crate.Tag("unpack on land");
		//}
		crate.Init();
	}

	return crate;
}

shared Vec2f getDropPosition(Vec2f drop)
{
	drop.x += -16.0f + 32.0f * 0.01f * XORRandom(100);
	drop.y = 32.0f + 8.0f * 0.01f * XORRandom(100);; // sky
	return drop;
}

shared void PackIntoCrate(CBlob@ this, int frameIndex)
{
	server_MakeCrate(this.getName(), this.getInventoryName(), frameIndex, this.getTeamNum(), this.getPosition());
	this.server_Die();
}